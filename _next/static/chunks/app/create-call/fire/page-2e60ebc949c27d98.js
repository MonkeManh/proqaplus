(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8359],{5516:(e,t,r)=>{"use strict";r.d(t,{DD:()=>function e(t,r){if("string"==typeof t)return t.replace(/\*\*pronoun\*\*/g,r);if(Array.isArray(t))return t.map((t,a)=>(0,n.jsx)(l.Fragment,{children:e(t,r)},a));if((0,l.isValidElement)(t)){let n=e(t.props.children,r);return l.cloneElement(t,{...t.props},n)}return t},U8:()=>a,U_:()=>s,xT:()=>o,xV:()=>i});var n=r(5155),l=r(2115);function a(e,t,r,n){if(!e)return!0;try{return e(t,r,n)}catch(e){return console.error("Error evaluating pre-render instructions:",e),!0}}function s(e,t,r){if(!e)return!0;try{return e(t,r)}catch(e){return console.error("Error evaluating pre-render instructions:",e),!0}}function o(e,t,r){if(e)try{return e(t,r)}catch(e){console.error("Error evaluating dependencies:",e);return}}function i(e,t){if(e)try{return e(t)}catch(e){console.error("Error evaluating dependencies:",e);return}}},5863:(e,t,r)=>{Promise.resolve().then(r.bind(r,5928))},5928:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>k});var n=r(5155),l=r(9380),a=r(7168),s=r(8482),o=r(1793),i=r(70),c=r(221),u=r(2115),d=r(2177),m=r(5594),p=r(4950),f=r(5784);let x=m.z.object({location:m.z.string().optional(),boxType:m.z.enum(["Phone Alarm","Still Alarm","Rescue","High Rise","Marine"]).optional(),chiefComplaint:m.z.string({required_error:"Please select a chief complaint"})});function h(e){let{onContinue:t,handleBack:r}=e,[m,h]=(0,u.useState)(null),g=(0,u.useRef)(null),v=(0,u.useRef)(null),S=(0,u.useRef)(null),b=(0,u.useRef)(null),j=(0,l.y)().map(e=>({value:"".concat(e.protocol," - ").concat(e.value),label:"".concat(e.protocol," - ").concat(e.value)}));(0,u.useEffect)(()=>{let e=localStorage.getItem("NEW_CALL");e&&h(JSON.parse(e))},[]);let y=m?p.w.filter(e=>e.postal===m.postal||e.postalRange.includes(m.postal)).map(e=>({value:e.name,label:e.name})):[],A=(0,d.mN)({resolver:(0,c.u)(x)});return(0,u.useEffect)(()=>{g.current&&g.current.focus()},[]),(0,u.useEffect)(()=>{let e=A.watch((e,t)=>{let{name:r}=t;"location"===r?setTimeout(()=>{var e;null==(e=v.current)||e.focus()},100):"boxType"===r?setTimeout(()=>{var e;null==(e=S.current)||e.focus()},100):"chiefComplaint"===r&&setTimeout(()=>{var e;null==(e=b.current)||e.focus()},100)});return()=>e.unsubscribe()},[A]),(0,n.jsxs)(s.Zp,{className:"max-w-5xl mx-auto h-fit w-full",children:[(0,n.jsx)(s.aR,{children:(0,n.jsx)(s.ZB,{className:"text-2xl",children:"Case Entry"})}),(0,n.jsx)(s.Wu,{children:(0,n.jsx)("div",{className:"space-y-8",children:(0,n.jsx)(i.lV,{...A,children:(0,n.jsxs)("form",{onSubmit:A.handleSubmit(e=>{let r={location:e.location||(null==m?void 0:m.buildingInfo),boxType:e.boxType,chiefComplaint:e.chiefComplaint},n=e.chiefComplaint.split(" - ");t(n.length>1?n[1]:e.chiefComplaint,r,!1)}),className:"space-y-8",children:[(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsx)(i.zB,{control:A.control,name:"location",render:e=>{var t;let{field:r}=e;return(0,n.jsxs)(i.eI,{children:[(0,n.jsx)(i.lR,{children:"Location"}),(0,n.jsx)(i.Rr,{className:"mb-1",children:"Select a specific location that has CIDS information available"}),(0,n.jsx)(i.MJ,{children:(0,n.jsx)(o.G,{options:y,value:null!=(t=r.value)?t:"",onValueChange:r.onChange,placeholder:"Select a location",searchPlaceholder:"Search locations...",autoFocus:!0})}),(0,n.jsx)(i.C5,{})]})}}),(0,n.jsx)(i.zB,{control:A.control,name:"boxType",render:e=>{let{field:t}=e;return(0,n.jsxs)(i.eI,{children:[(0,n.jsx)(i.lR,{children:"Alarm Type"}),(0,n.jsx)(i.Rr,{className:"mb-1",children:"Select a specific call location (optional)"}),(0,n.jsx)(i.MJ,{children:(0,n.jsxs)(f.l6,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,n.jsx)(i.MJ,{children:(0,n.jsx)(f.bq,{ref:v,children:(0,n.jsx)(f.yv,{placeholder:"Select Box Type"})})}),(0,n.jsxs)(f.gC,{children:[(0,n.jsx)(f.eb,{value:"Phone Alarm",children:"Phone Alarm Box"}),(0,n.jsx)(f.eb,{value:"Rescue",children:"Rescue Box"}),(0,n.jsx)(f.eb,{value:"High Rise",children:"High Rise Box"}),(0,n.jsx)(f.eb,{value:"Still Alarm",children:"Still Alarm Box"}),(0,n.jsx)(f.eb,{value:"Marine",children:"Marine"})]})]})}),(0,n.jsx)(i.C5,{})]})}}),(0,n.jsx)(i.zB,{control:A.control,name:"chiefComplaint",render:e=>{let{field:t}=e;return(0,n.jsxs)(i.eI,{children:[(0,n.jsx)(i.lR,{children:"Chief Complaint"}),(0,n.jsx)(i.Rr,{className:"mb-1",children:"Select the primary complaint or reason for the call"}),(0,n.jsx)(i.MJ,{children:(0,n.jsx)(o.G,{options:j,value:t.value,onValueChange:t.onChange,placeholder:"Select chief complaint",searchPlaceholder:"Search complaints...",ref:S})}),(0,n.jsx)(i.C5,{})]})}})]}),(0,n.jsxs)("div",{className:"w-full flex flex-row-reverse justify-between mb-12 mt-10",children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)(a.$,{type:"button",variant:"destructive",className:"cursor-pointer",onClick:()=>{let e=A.getValues().chiefComplaint;if(e){let r=e.split(" - "),n=r.length>1?r[1]:e;t(n,{location:A.getValues().location,boxType:A.getValues().boxType,chiefComplaint:n},!0)}},children:"ProQA Override"}),(0,n.jsx)(a.$,{type:"submit",ref:b,variant:"outline",className:"hover:bg-red-600 focus-visible:ring-red-600 focus-visible:ring-offset-2 focus-visible:outline-none",children:"Continue"})]}),(0,n.jsx)(a.$,{onClick:r,type:"button",variant:"outline",children:"Back"})]})]})})})})]})}var g=r(1058),v=r(3999);function S(e){let{complaintName:t,recommendedCode:r,onSelect:o,onBack:i}=e,[c,d]=(0,u.useState)(null),[m,p]=(0,u.useState)([]),[f,x]=(0,u.useState)(r),[h,S]=(0,u.useState)(0),b=(0,u.useRef)(null),j=e=>{switch(e){case"O":return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300";case"A":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"B":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";case"C":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"D":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";case"E":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300"}},y=e=>e===r,A=e=>{let t=g.Zh.find(t=>t.id===e);return(null==t?void 0:t.incidentType)||"Plan ".concat(e)};(0,u.useEffect)(()=>{let e=l.A.find(e=>e.name===t);if(e&&e.availableDeterminants){d(e);let t=localStorage.getItem("FIRE_PROQA_DATA"),n=t?JSON.parse(t):null,l=(null==n?void 0:n.currentSubType)?"".concat(n.currentCode).concat(n.currentSubType):r;x(l);let a=[];e.availableDeterminants.forEach(e=>{e.determinants.forEach(t=>{a.push({code:t.code,text:t.text,recResponse:t.recResponse,priority:e.priority}),t.subCodes&&t.subCodes.forEach(r=>{a.push({code:"".concat(t.code).concat(r.code),text:"".concat(t.text," - ").concat(r.text),recResponse:r.recResponse,priority:e.priority,isSubCode:!0,parendCode:t.code,parentText:t.text})})})}),p(a);let s=a.findIndex(e=>e.code===l);s>=0&&S(s)}},[t,r]);let N=(0,u.useCallback)((e,t,r)=>{x(e),o(e,t,r)},[o]);return((0,u.useEffect)(()=>{let e=e=>{if(m.length){if("ArrowDown"===e.key)e.preventDefault(),S(e=>(e+1)%m.length);else if("ArrowUp"===e.key)e.preventDefault(),S(e=>(e-1+m.length)%m.length);else if("Enter"===e.key){e.preventDefault();let t=m[h];N(t.code,t.recResponse,t.text)}}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[m,h,N]),(0,u.useEffect)(()=>{if(b.current){let e=b.current.querySelectorAll(".determinant-item");e[h]&&e[h].scrollIntoView({behavior:"smooth",block:"center"})}},[h]),(0,u.useEffect)(()=>{if(b.current&&r){let e=b.current.querySelectorAll(".determinant-item"),t=Array.from(e).findIndex(e=>{var t;return null==(t=e.textContent)?void 0:t.includes(r)});t>=0&&e[t].scrollIntoView({behavior:"auto",block:"center"})}},[r,c]),c&&c.availableDeterminants)?(0,n.jsxs)(s.Zp,{className:"max-w-5xl mx-auto h-fit w-full",children:[(0,n.jsx)(s.aR,{children:(0,n.jsx)(s.ZB,{className:"text-2xl",children:"ProQA Questions"})}),(0,n.jsx)(s.Wu,{children:(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsxs)("h3",{className:"text-xl font-medium",children:["Select Determinant Code: ",c.name]}),(0,n.jsxs)("p",{className:"text-muted-foreground",children:["Recommended: ",r]})]}),(0,n.jsx)(s.Zp,{children:(0,n.jsx)(s.Wu,{className:"p-4",children:(0,n.jsx)("div",{ref:b,className:"overflow-y-auto",children:(0,n.jsx)("div",{className:"space-y-4",children:c.availableDeterminants.sort((e,t)=>e.priority.localeCompare(t.priority)).map(e=>(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("h3",{className:"text-md font-medium p-2 rounded-md ".concat(j(e.priority)),children:[e.priority," Level"]}),(0,n.jsx)("div",{className:"space-y-1",children:e.determinants.map(e=>{let t=m.findIndex(t=>t.code===e.code),r=y(e.code),l=f===e.code,a=h===t;return(0,n.jsxs)("div",{className:"space-y-0.5",children:[(0,n.jsxs)("div",{className:(0,v.cn)("determinant-item flex items-center gap-4 p-2 rounded-md",l?"bg-primary text-primary-foreground":a?"bg-green-500 text-white":"",r?"border-2 border-red-500":""),onClick:()=>{S(t),N(e.code,e.recResponse,e.text)},children:[(0,n.jsx)("span",{className:"font-mono font-medium w-16",children:e.code}),(0,n.jsx)("span",{className:"flex-1",children:e.text}),(0,n.jsx)("span",{className:"ml-2",children:A(e.recResponse)})]}),e.subCodes&&(0,n.jsx)("div",{className:"ml-6 space-y-0.5",children:e.subCodes.map(t=>{let r="".concat(e.code).concat(t.code),l=m.findIndex(e=>e.code===r),a=y(r),s=f===r,o=h===l;return(0,n.jsxs)("div",{className:(0,v.cn)("determinant-item flex items-center gap-4 p-1.5 rounded-md text-sm px-4",s?"bg-primary text-primary-foreground":o?"bg-green-500 text-white":"bg-muted/50",a?"border-2 border-green-500":""),onClick:()=>{S(l),N(r,t.recResponse,"".concat(e.text," - ").concat(t.text))},children:[(0,n.jsx)("span",{className:"font-mono font-medium w-4",children:t.code}),(0,n.jsx)("span",{className:"flex-1",children:t.text}),(0,n.jsx)("span",{className:"ml-2",children:A(t.recResponse)})]},r)})})]},e.code)})})]},e.priority))})})})}),(0,n.jsx)("div",{className:"flex justify-between",children:(0,n.jsx)(a.$,{variant:"outline",onClick:i,children:"Back"})})]})})]}):(0,n.jsx)("div",{children:"Loading determinants..."})}var b=r(9852),j=r(5516),y=r(8996);let A=e=>{var t;switch((null==(t=e.match(/[A-E]/))?void 0:t[0])||""){case"E":return 5;case"D":return 4;case"C":return 3;case"B":return 2;case"A":return 1;default:return 0}},N=e=>{if(!e.availableDeterminants)return"DEFAULT";let t="DEFAULT",r=6;for(let n of e.availableDeterminants)for(let e of n.determinants){let n=A(e.code);n<r&&(r=n,t=e.code)}return t},C=e=>{if("string"==typeof e)return e;if(u.isValidElement(e)){let t="";return e.props.children&&u.Children.forEach(e.props.children,e=>{"string"==typeof e?t+=e:u.isValidElement(e)&&(t+=C(e))}),t}return""},w=(e,t)=>{if(!t)return!0;let r=A(t);return A(e)>r};function E(e){let{complaintName:t,onComplete:r,onBack:o,onSwitchProtocol:i}=e,[c,d]=(0,u.useState)(null),[m,p]=(0,u.useState)(0),[f,x]=(0,u.useState)(null),[h,g]=(0,u.useState)(0),[S,A]=(0,u.useState)(""),[E,R]=(0,u.useState)(0),[I,T]=(0,u.useState)(!1),[k,D]=(0,u.useState)(!1),[_,O]=(0,u.useState)([]),[P,F]=(0,u.useState)(""),[Q,q]=(0,u.useState)(!1),[B,L]=(0,u.useState)(null),[V,J]=(0,u.useState)([]),U=(0,u.useRef)(null),M=(0,u.useCallback)(e=>{let r={complaint:t,currentQuestion:m,selectedAnswers:e,currentCode:S,currentSubCode:P,currentPlan:E,determinant:S?P?"".concat(S).concat(P):S:"DEFAULT",protocol:null==c?void 0:c.name,startTime:localStorage.getItem("DISPATCH_PROQA_START")||new Date().toISOString()};localStorage.setItem("FIRE_PROQA_ANSWERS",JSON.stringify(e)),localStorage.setItem("FIRE_PROQA_DATA",JSON.stringify(r))},[t,m,S,P,E,null==c?void 0:c.name]),W=(0,u.useCallback)(()=>{if(!c)return;let e=m+1;if(e>=c.questions.length){D(!0),localStorage.removeItem("FIRE_PROQA_DATA");return}p(e),x(null),g(0)},[c,m]),Z=(0,u.useCallback)((e,t)=>{if(!c)return;let r=c.questions[m],n=null==r?void 0:r.answers[e];if(console.log("Selected answer index: ".concat(e,", answer:"),n),!r||!n)return;if(void 0!==n.goto){localStorage.removeItem("FIRE_PROQA_DATA"),localStorage.removeItem("FIRE_PROQA_ANSWERS"),p(0),x(null),g(0),A(""),R(0),T(!1),D(!1),O([]),F(""),J([]),i&&i(n.goto);return}if(x(e),n.input&&!t){q(!0),L(e);return}let l={questionIndex:m,code:S,subCode:P,plan:E,isCodeOverridden:I,answersLength:_.length},a=n.display.replace("{input}",t||n.answer),s=C(r.text),o={question:s,defaultQuestion:s,defaultAnswer:n.answer,answer:a,questionIndex:m,omit:r.omitQuestion||!1,timestamp:new Date().toISOString()},u=[..._],d=u.findIndex(e=>e.questionIndex===m);if(d>=0?u[d]=o:u.push(o),O(u),n.updateSubCode&&F(n.updateSubCode),n.dependency){console.log("Checking dependency with answers:",_);let e=(0,j.xV)(n.dependency,_);console.log("Dependency result:",e),e&&(e.code&&A(e.code),e.subCode&&F(e.subCode),e.plan&&R(e.plan),e.override&&T(!0))}n.updateCode&&!I&&(n.override||w(n.updateCode,S))&&(A(n.updateCode),n.override&&T(!0));let f=[...V];if(f[m]=l,J(f),M(u),x(e),n.end){D(!0),localStorage.removeItem("FIRE_PROQA_DATA");return}n.continue&&W()},[c,m,_,S,P,E,I,V,i,W,M]);if((0,u.useEffect)(()=>{let e=localStorage.getItem("FIRE_PROQA_DATA");if(!e)return;let r=JSON.parse(e);r.complaint===t&&(p(r.currentQuestion),A(r.currentCode||""),R(r.currentPlan),F(r.currentSubCode||""))},[t]),(0,u.useEffect)(()=>{if(!k)return;let e=S,t=localStorage.getItem("FIRE_PROQA_DATA"),n=t?JSON.parse(t):null;!e&&(null==n?void 0:n.currentCode)&&(e=n.currentCode),e&&"DEFAULT"!==e||(e=c?N(c):"DEFAULT"),r(e,e,P||(null==n?void 0:n.currentSubCode)||""),D(!1)},[k,S,P,E,r,c]),(0,u.useEffect)(()=>{let e=l.A.find(e=>e.name===t);e&&(d(e),R(e.defaultPlan),p(0),x(null),g(0),A(""),R(e.defaultPlan),T(!1),D(!1),O([]),F(""))},[t]),(0,u.useEffect)(()=>{let e=e=>{if(!c||Q)return;let t=c.questions[m];if(!t||"select"!==t.questionType)return;let r=t.answers.map((e,t)=>({answer:e,index:t})).filter(e=>{let{answer:t}=e;return!t.preRenderInstructions||(0,j.U_)(t.preRenderInstructions,_,S)}),n=r.length;if(0!==n){if("ArrowDown"===e.key)e.preventDefault(),g(e=>(e+1)%n);else if("ArrowUp"===e.key)e.preventDefault(),g(e=>(e-1+n)%n);else if("Enter"===e.key){var l;e.preventDefault();let t=null==(l=r[h])?void 0:l.index;void 0!==t&&Z(t)}}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[c,m,h,Q,Z,_,S]),(0,u.useEffect)(()=>{if(U.current){let e=U.current.querySelectorAll(".answer-option");e[h]&&e[h].scrollIntoView({behavior:"smooth",block:"nearest"})}},[h]),!c||k)return null;let z=c.questions[m];return z?(()=>{if(!c)return!1;let e=c.questions[m];return!!e&&(!e.preRenderInstructions||(0,j.U_)(e.preRenderInstructions,_,S))})()?(0,n.jsxs)(s.Zp,{className:"max-w-5xl mx-auto h-fit w-full",children:[(0,n.jsx)(s.aR,{children:(0,n.jsx)(s.ZB,{className:"text-2xl",children:"ProQA Questions"})}),(0,n.jsx)(s.Wu,{children:(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsxs)("h3",{className:"text-lg text-muted-foreground font-medium",children:["ProQA Protocol: ",c.name]}),(0,n.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Question ",m+1," of"," ",c.questions.length]})]}),(0,n.jsx)(s.Zp,{children:(0,n.jsxs)(s.Wu,{className:"p-6",children:[(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("h4",{className:"text-lg font-medium mb-4",children:z.text}),"                ","select"===z.questionType?(0,n.jsx)("div",{ref:U,className:"space-y-2 overflow-y-auto",children:z.answers.map((e,t)=>({answer:e,originalIndex:t})).filter(e=>{let{answer:t}=e;return!t.preRenderInstructions||(0,j.U_)(t.preRenderInstructions,_,S)}).map((e,t)=>{let{answer:r,originalIndex:l}=e;return(0,n.jsx)("div",{onClick:()=>Z(l),className:(0,v.cn)("answer-option p-3 rounded-md transition-colors cursor-pointer",f===l?"bg-primary text-primary-foreground":h===t?"bg-green-500 text-white":"bg-muted hover:bg-muted/80"),onMouseEnter:()=>g(t),children:r.answer},l)})}):"input"===z.questionType&&(0,n.jsx)("form",{onSubmit:e=>{e.preventDefault();let t=e.currentTarget.querySelector("input");t&&t.value&&(Z(0,t.value),t.value="")},children:(0,n.jsx)(b.p,{placeholder:z.answers[0].answer,autoFocus:!0})})]})," ",m>=0&&(0,n.jsx)("div",{className:"flex justify-start mt-8",children:(0,n.jsx)(a.$,{variant:"outline",onClick:()=>{if(m>0){let e=m-1,t=V[m];t&&(A(t.code),F(t.subCode),R(t.plan),T(t.isCodeOverridden),O(_.filter(e=>e.questionIndex<m))),p(e),x(null),g(0),M(_.filter(e=>e.questionIndex<m))}else o()},className:"text-sm",children:m>0?"Previous Question":"Back to Case Entry"})})]})})]})}),(0,n.jsx)(y.M,{isOpen:Q,onClose:()=>{q(!1),L(null),x(null)},onSubmit:e=>{q(!1),L(null),null!==B&&Z(B,e)},title:z?C(z.text):""})]}):(W(),null):(D(!0),null)}var R=r(7746),I=r(4865),T=r(5695);function k(){let e=(0,T.useRouter)(),[t,r]=(0,u.useState)({postal:"",street:"",buildingInfo:"",crossStreet1:"",crossStreet2:"",callerName:"",callerNumber:"",callerText:"",service:"Fire"}),[a,s]=(0,u.useState)({location:"",boxType:"",chiefComplaint:""}),[o,i]=(0,u.useState)(1),[c,d]=(0,u.useState)(""),[m,p]=(0,u.useState)("");(0,u.useEffect)(()=>{let t=localStorage.getItem("NEW_CALL");if(!t)return e.push("/create-call");let n=JSON.parse(t);if(!n||"Fire"!==n.service)return e.push("/create-call");r(n)},[e]);let f=()=>{o>1?i(o-1):e.push("/create-call")},x=()=>{let e=localStorage.getItem("FIRE_PROQA_ANSWERS");if(e)return JSON.parse(e)},g=(e,t)=>{let r=["O","A","B","C","D","E"],n=e.charAt(2),l=t.charAt(2);return r.indexOf(n)<r.indexOf(l)},v=async(r,n,s)=>{var o,i;let u=await x();localStorage.removeItem("FIRE_PROQA_DATA"),localStorage.removeItem("FIRE_PROQA_ANSWERS");let d=localStorage.getItem("PREFERENCES");if((d?JSON.parse(d):{}).advancedMode){let i={...t,buildingInfo:a.location,boxType:a.boxType,complaint:c,complaintShort:null==(o=l.A.find(e=>e.name===c))?void 0:o.shortName,code:r,codeText:s,plan:n,proqaAnswers:u,timestamp:new Date().toISOString()};localStorage.setItem("PENDING_ASSIGN_FIRE",JSON.stringify(i)),e.push("/assign/fire")}else{let o={...t,complaint:c,complaintShort:null==(i=l.A.find(e=>e.name===c))?void 0:i.shortName,buildingInfo:a.location,boxType:a.boxType,code:r,codeText:s,plan:n,proqaAnswers:u,timestamp:new Date().toISOString(),units:["Pending"],dispatchTime:new Date().toISOString()};localStorage.setItem("DISPATCH_HISTORY",JSON.stringify(o)),e.push("/summary/fire")}};return(0,n.jsxs)("div",{className:"flex flex-col min-h-screen",children:[(0,n.jsx)(I.A,{}),(0,n.jsxs)("main",{className:"w-full flex justify-center flex-1 mt-12",children:[1===o&&(0,n.jsx)(h,{onContinue:(e,t,r)=>(s(t),d(e),i(r?3:2)),handleBack:f}),2===o&&(0,n.jsx)(E,{complaintName:c,onComplete:(e,t,r)=>{let n=t&&r?"".concat(t).concat(r):e;(!m||g(n,m))&&p(n),n&&"DEFAULT"!==n&&i(3)},onBack:f,onSwitchProtocol:e=>{let r=l.A.find(t=>t.protocol===e);r&&(t.reconfigured=c,localStorage.removeItem("FIRE_PROQA_DATA"),localStorage.removeItem("FIRE_PROQA_QUESTIONS"),d(r.name))}}),3===o&&(0,n.jsx)(S,{complaintName:c,recommendedCode:m,onSelect:v,onBack:f})]}),(0,n.jsx)(R.A,{})]})}},8996:(e,t,r)=>{"use strict";r.d(t,{M:()=>i});var n=r(5155),l=r(7168),a=r(9840),s=r(9852),o=r(2115);function i(e){let{isOpen:t,onClose:r,onSubmit:i,title:c}=e,[u,d]=(0,o.useState)(""),m=e=>{e.preventDefault(),u.trim()&&(i(u.trim()),d(""),r())};return(0,n.jsx)(a.lG,{open:t,onOpenChange:r,children:(0,n.jsxs)(a.Cf,{children:[(0,n.jsx)(a.c7,{children:(0,n.jsx)(a.L3,{children:c})}),(0,n.jsxs)("form",{onSubmit:m,children:[(0,n.jsx)(s.p,{value:u,onChange:e=>d(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),m(e))},placeholder:"Enter description...",autoFocus:!0}),(0,n.jsx)(a.Es,{className:"mt-4",children:(0,n.jsx)(l.$,{type:"submit",children:"Ok"})})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[4619,6580,9726,4977,8045,1058,5916,6528,8441,1684,7358],()=>t(5863)),_N_E=e.O()}]);