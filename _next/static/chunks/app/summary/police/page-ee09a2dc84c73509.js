(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6600],{1469:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{default:function(){return c},getImageProps:function(){return l}});let i=n(8229),a=n(8883),r=n(3063),o=i._(n(1193));function l(e){let{props:t}=(0,a.getImgProps)(e,{defaultLoader:o.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,n]of Object.entries(t))void 0===n&&delete t[e];return{props:t}}let c=r.Image},4328:(e,t,n)=>{"use strict";n.d(t,{hO:()=>i,lM:()=>a}),n(9401);let i=e=>a.find(t=>t.id===e),a=[{id:1,name:"2P",incidentType:"ASSIST|EMS|CPR",units:[{type:"Police Patrol",quantity:2}]},{id:2,name:"1PWLR",incidentType:"ANIMAL|ATTACK",units:[{type:"Police Patrol",quantity:1},{type:"Wildlife Ranger",quantity:1}]},{id:3,name:"1P",incidentType:"ASSAULT",units:[{type:"Police Patrol",quantity:1}]},{id:4,name:"2PDET",incidentType:"ASSAULT|CPR|INVEST",units:[{type:"Police Patrol",quantity:2},{type:"Investigator",quantity:1}]},{id:5,name:"2P",incidentType:"ASSAULT",units:[{type:"Police Patrol",quantity:2}]},{id:6,name:"3P",incidentType:"ASSAULT|MULTIPLE",units:[{type:"Police Patrol",quantity:3}]},{id:7,name:"2P",incidentType:"ASSIST|EMS|FIRE|PERSON",units:[{type:"Police Patrol",quantity:2}]},{id:8,name:"2PDET",incidentType:"CPR|DEATH|INVEST",units:[{type:"Police Patrol",quantity:2},{type:"Investigator",quantity:1}]},{id:9,name:"1PDET",incidentType:"DEATH|INVEST",units:[{type:"Police Patrol",quantity:1},{type:"Investigator",quantity:1}]},{id:10,name:"1P",incidentType:"ASSIST|EMS|DRUGS",units:[{type:"Police Patrol",quantity:1}]},{id:11,name:"2P",incidentType:"ASSIST|EMS|VIOLENT",units:[{type:"Police Patrol",quantity:2}]},{id:12,name:"2PMARINE",incidentType:"ASSIST|EMS|MARINE",units:[{type:"Police Patrol",quantity:2},{type:"Marine Unit",quantity:1}]},{id:13,name:"2P",incidentType:"ASSIST|EMS|JUMPER",units:[{type:"Police Patrol",quantity:2}]},{id:14,name:"1P",incidentType:"ASSIST|EMS|PSYCH",units:[{type:"Police Patrol",quantity:1}]},{id:15,name:"3P",incidentType:"SHOT|INJS",units:[{type:"Police Patrol",quantity:3}]},{id:16,name:"2P",incidentType:"ASSIST|EMS|TRAUMA",units:[{type:"Police Patrol",quantity:2}]},{id:17,name:"3P",incidentType:"STAB|INJS",units:[{type:"Police Patrol",quantity:3}]},{id:18,name:"4P1S",incidentType:"SHOOTING|MULT|INJS",units:[{type:"Police Patrol",quantity:4},{type:"Supervisor",quantity:1}]},{id:19,name:"3P",incidentType:"ASSIST|EMS|TRAUMA|MULT",units:[{type:"Police Patrol",quantity:3}]},{id:20,name:"4P1S",incidentType:"STAB|MULT|INJS",units:[{type:"Police Patrol",quantity:4},{type:"Supervisor",quantity:1}]},{id:21,name:"2PTRAFFIC",incidentType:"VEH|ACCIDENT|PI",units:[{type:"Police Patrol",quantity:2},{type:"Traffic",quantity:1}],sendEMS:!0},{id:22,name:"TRAFFIC",incidentType:"VEH|ACCIDENT|PD",units:[{type:"Traffic",quantity:1}]},{id:23,name:"4P1S1W2PA",incidentType:"AIR|CRASH|LARGE",units:[{type:"Police Patrol",quantity:4},{type:"Supervisor",quantity:1},{type:"Watch Commander",quantity:1},{type:"Port Authority",quantity:2}],sendEMS:!0},{id:24,name:"2P2PA1S",incidentType:"TRAIN|CRASH",units:[{type:"Police Patrol",quantity:2},{type:"Port Authority",quantity:2},{type:"Supervisor",quantity:1}],sendEMS:!0},{id:25,name:"1P2MARINE",incidentType:"MARINE|ACCIDENT",units:[{type:"Police Patrol",quantity:1},{type:"Traffic",quantity:1},{type:"Marine Unit",quantity:2}],sendEMS:!0},{id:26,name:"2PTRAFFIC+PA",incidentType:"TRAIN|PED|PI",units:[{type:"Police Patrol",quantity:2},{type:"Traffic",quantity:1},{type:"Port Authority",quantity:1}],sendEMS:!0},{id:27,name:"4P",incidentType:"CID",units:[{type:"Police Patrol",quantity:4}]},{id:28,name:"4P1S",incidentType:"HOSIT",units:[{type:"Police Patrol",quantity:4},{type:"Supervisor",quantity:1}]},{id:29,name:"2P",incidentType:"HOSTO",units:[{type:"Police Patrol",quantity:2}]},{id:30,name:"2PEMS",incidentType:"HOSTO|INJS",units:[{type:"Police Patrol",quantity:2},{type:"EMS Notification",quantity:1}],sendEMS:!0},{id:31,name:"3P1SEMS",incidentType:"HOSTO|INJS|MULT",units:[{type:"Police Patrol",quantity:3},{type:"Supervisor",quantity:1},{type:"EMS Notification",quantity:1}],sendEMS:!0},{id:32,name:"4P1SEMS",incidentType:"HOSTI|INJS",units:[{type:"Police Patrol",quantity:4},{type:"Supervisor",quantity:1},{type:"EMS Notification",quantity:1}],sendEMS:!0},{id:33,name:"4P1S1WEMS",incidentType:"HOSTI|INJS|MULT",units:[{type:"Police Patrol",quantity:4},{type:"Supervisor",quantity:1},{type:"Watch Commander",quantity:1},{type:"EMS Notification",quantity:1}],sendEMS:!0},{id:34,name:"4PEMS",incidentType:"CID|INJS",units:[{type:"Police Patrol",quantity:4},{type:"EMS Notification",quantity:1}],sendEMS:!0}]},5028:(e,t,n)=>{"use strict";n.d(t,{default:()=>a.a});var i=n(6645),a=n.n(i)},5222:(e,t,n)=>{Promise.resolve().then(n.bind(n,8417))},6645:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a}});let i=n(8229)._(n(7357));function a(e,t){var n;let a={};"function"==typeof e&&(a.loader=e);let r={...a,...t};return(0,i.default)({...r,modules:null==(n=r.loadableGenerated)?void 0:n.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6766:(e,t,n)=>{"use strict";n.d(t,{default:()=>a.a});var i=n(1469),a=n.n(i)},7357:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return c}});let i=n(5155),a=n(2115),r=n(2146);function o(e){return{default:e&&"default"in e?e.default:e}}n(255);let l={loader:()=>Promise.resolve(o(()=>null)),loading:null,ssr:!0},c=function(e){let t={...l,...e},n=(0,a.lazy)(()=>t.loader().then(o)),c=t.loading;function s(e){let o=c?(0,i.jsx)(c,{isLoading:!0,pastDelay:!0,error:null}):null,l=!t.ssr||!!t.loading,s=l?a.Suspense:a.Fragment,u=t.ssr?(0,i.jsxs)(i.Fragment,{children:[null,(0,i.jsx)(n,{...e})]}):(0,i.jsx)(r.BailoutToCSR,{reason:"next/dynamic",children:(0,i.jsx)(n,{...e})});return(0,i.jsx)(s,{...l?{fallback:o}:{},children:u})}return s.displayName="LoadableComponent",s}},8145:(e,t,n)=>{"use strict";n.d(t,{E:()=>c});var i=n(5155);n(2115);var a=n(9708),r=n(2085),o=n(3999);let l=(0,r.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function c(e){let{className:t,variant:n,asChild:r=!1,...c}=e,s=r?a.Slot:"span";return(0,i.jsx)(s,{"data-slot":"badge",className:(0,o.cn)(l({variant:n}),t),...c})}},8417:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>f});var i=n(5155),a=n(7746),r=n(4865),o=n(8145),l=n(7168),c=n(8482),s=n(4328),u=n(7797),d=n(5695),p=n(2115),y=n(6671);let S=e=>{if(!e.includes("Subject: {"))return e;let t=e.split(" | ")[0].split("Subject: {")[0].trim().replace(/:$/,""),n=e=>{var t;let n=(null==(t=e.match(/\{([^}]+)\}/))?void 0:t[1].split(", "))||[],i={};n.forEach(e=>{let[t,n]=e.split(":");n&&n.trim()&&(i[t]=n.trim())});let a="";i.Gender&&(a=i.Race&&"Unknown"!==i.Race?(({White:"W",Black:"B",Hispanic:"H",Asian:"A","Pacific Islander":"PI","Native American":"NA"})[i.Race]||i.Race[0])+i.Gender[0]:i.Gender);let r=[];a&&r.push(a.toUpperCase()),i.Age&&r.push("".concat(i.Age,"YO")),i.Hair&&r.push("w/ ".concat(i.Hair," hair"));let o=[];return i.Height&&o.push(i.Height),i.Weight&&o.push(i.Weight),i.DOB&&o.push("DOB: ".concat(i.DOB)),i.EyeColor&&o.push("w/ ".concat(i.EyeColor," eyes")),i.Complexion&&o.push(i.Complexion),i.Demeanor&&o.push(i.Demeanor),o.length&&r.push(o.join("/")),i.Clothing&&r.push("// WEARING: ".concat(i.Clothing)),i.Name&&r.push("// NAME: ".concat(i.Name)),i.Relationship&&r.push("// RELATIONSHIP: ".concat(i.Relationship)),i.Address&&r.push("// ADDRESS: ".concat(i.Address)),i.Phone&&r.push("// PHONE: ".concat(i.Phone)),i.Other&&r.push("// OTHER: ".concat(i.Other)),r.join(" ")},i=e.split(" | "),a=i.length>1?"".concat(t,"s"):t;return["-- ".concat(a," (").concat(i.length,"):"),...i.map((e,t)=>"--  {".concat(t+1,"} ").concat(n(e)))].join("\n")},P=e=>{if(!e.includes("Vehicle: {"))return e;let t=e=>{var t;let n=(null==(t=e.match(/\{([^}]+)\}/))?void 0:t[1].split(", "))||[],i={};n.forEach(e=>{let[t,n]=e.split(":");n&&n.trim()&&"Unk"!==n.trim()&&(i[t]=n.trim())});let a=[],r=[];return i.Color&&r.push(i.Color.toUpperCase()),i.Year&&r.push(i.Year),i.Make&&r.push(i.Make),i.Model&&r.push(i.Model),r.length&&a.push(r.join("/")),i.LP&&a.push("// LP: ".concat(i.LP)),i.Occ&&a.push("// ".concat(i.Occ,"x OCC")),i.Other&&a.push("// ".concat(i.Other)),a.join(" ")},n=e.split(" | ");return["-- Vehicles ("+n.length+"):",...n.map((e,n)=>"-- {".concat(n+1,"} ").concat(t(e)))].join("\n")};function f(){let[e,t]=(0,p.useState)(null),[n,f]=(0,p.useState)(""),m=(0,d.useRouter)();function h(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"EMS";navigator.clipboard.writeText(n).then(()=>{y.o.success("Case Created",{description:"Call created, creating dispatch for "+t});let n={postal:(null==e?void 0:e.postal)||"",buildingInfo:(null==e?void 0:e.buildingInfo)||"",street:(null==e?void 0:e.street)||"",crossStreet1:(null==e?void 0:e.crossStreet1)||"",crossStreet2:(null==e?void 0:e.crossStreet2)||"",callerNumber:(null==e?void 0:e.callerNumber)||"",callerName:(null==e?void 0:e.callerName)||"",callerStatement:(null==e?void 0:e.callerStatement)||"",service:t,notSecure:!0,fromPolice:!0};return(localStorage.setItem("NEW_CALL",JSON.stringify(n)),"EMS"===t)?m.push("/create-call/ems"):"FIRE"===t?m.push("/create-call/fire"):void 0})}return(0,p.useEffect)(()=>{let e=localStorage.getItem("DISPATCH_HISTORY");if(e){let n=JSON.parse(e);Array.isArray(n)?t(n[n.length-1]):t(n)}},[]),(0,p.useEffect)(()=>{if(e){var t;let n=e.units,i=null==(t=(0,u.g1)(e.postal))?void 0:t.twp;f(["Code: ".concat(e.code),"Location: ".concat(e.postal," ").concat(e.street).concat(i?", ".concat(i):"").concat(e.buildingInfo?" - ".concat(e.buildingInfo):""),"Cross: ".concat(e.crossStreet1||"N/A"," / ").concat(e.crossStreet2||"N/A"),"Recc: ".concat(function(e){let t=s.lM.find(t=>t.id===e);return t?t.units.map(e=>{let t=e.type;if("Ambulance"===t)t="Transport (BLS)";else if("Medic"===t)t="Transport (ALS)";else if("AMR 400 Series (BLS)"===t)t="Transport (BLS)";else if("AMR 600 Series (ALS)"===t)t="Transport (ALS)";else if("AMR 800 Series (ACLS"===t)t="Transport (ACLS)";else if("EMS Notification"===t)return"EMS Notification";return"".concat(e.quantity,"x ").concat(t)}).join(", "):"None"}(e.plan)),"Disp: ".concat(n.join(", ")||"None"),"Complaint: ".concat(e.complaintShort," - ").concat(e.codeText),"Caller Statement: ".concat(e.callerStatement),"==============================","Caller: ".concat(e.callerName||"Unknown"," | Phone: ").concat(e.callerNumber||"N/A"),"ProQA Information:",e.reconfigured?"-- Call reconfigured from ".concat(e.reconfigured):"",!(null==e?void 0:e.proqaAnswers)||(null==e?void 0:e.isOverriden)?"-- ProQA Override":[...(e.proqaAnswers||[]).filter(e=>!e.omit).map(e=>e.answer.includes("Subject: {")?S(e.answer):e.answer.includes("Vehicle: {")?P(e.answer):"-- ".concat(e.answer))],"ProQA completed by: Dispatcher ".concat(localStorage.getItem("CALLSIGN")||"UNKNOWN")].flat().filter(Boolean).join("\n"))}},[e]),e?(0,i.jsxs)("div",{className:"flex flex-col min-h-screen",children:[(0,i.jsx)(r.A,{}),(0,i.jsx)("main",{className:"flex-1 flex justify-center py-8",children:(0,i.jsx)("div",{className:"container space-y-4",children:(0,i.jsxs)(c.Zp,{children:[(0,i.jsx)(c.aR,{children:(0,i.jsxs)(c.ZB,{className:"flex justify-between items-center",children:[(0,i.jsx)("span",{children:"Dispatch Summary"}),(0,i.jsx)(o.E,{variant:"outline",className:"font-mono",children:e.complaint})]})}),(0,i.jsxs)(c.Wu,{className:"space-y-2",children:[(0,i.jsx)("textarea",{value:n,onChange:e=>f(e.target.value),className:"w-full min-h-[500px] font-mono text-sm p-4 border rounded-lg resize-none auto-expand",style:{resize:"none"},spellCheck:!1}),(0,i.jsx)("div",{className:"flex justify-end space-x-2 pt-4",children:(0,i.jsx)(l.$,{className:"cursor-pointer",variant:"destructive",onClick:()=>e.tandem&&"EMS"===e.service?h():void(e&&navigator.clipboard.writeText(n).then(()=>{var t,n;let i=(null==(t=s.lM.find(t=>t.id===(null==e?void 0:e.plan)))?void 0:t.sendEMS)===!0,a=(null==(n=s.lM.find(t=>t.id===(null==e?void 0:e.plan)))?void 0:n.sendFire)===!0;if(i&&!e.fromOther)return h("EMS");if(a&&!e.fromOther)return h("FIRE");y.o.success("Case Created",{description:"Dispatch summary has been copied"});let r=JSON.parse(localStorage.getItem("PREFERENCES")||"{}");if(r&&r.soundEffects){let e=new Audio("/audio/Dispatch.mp3");e.play(),e.volume=.5}localStorage.removeItem("NEW_CALL"),window.dispatchEvent(new CustomEvent("dispatch-storage-update")),m.push("/dispatch")}).catch(e=>{console.error("Failed to copy:",e),y.o.error("Failed to copy",{description:"Could not copy to clipboard"})})),children:e.tandem&&"EMS"===e.service?"Continue":"Complete Case"})})]})]})})}),(0,i.jsx)(a.A,{})]}):(0,i.jsx)("div",{children:"Loading..."})}}},e=>{var t=t=>e(e.s=t);e.O(0,[4619,6580,6671,8045,7423,7797,8441,1684,7358],()=>t(5222)),_N_E=e.O()}]);