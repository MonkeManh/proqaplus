(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4873],{1469:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{default:function(){return l},getImageProps:function(){return s}});let r=n(8229),a=n(8883),i=n(3063),o=r._(n(1193));function s(e){let{props:t}=(0,a.getImgProps)(e,{defaultLoader:o.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,n]of Object.entries(t))void 0===n&&delete t[e];return{props:t}}let l=i.Image},1969:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(5155),a=n(3999);function i(e){let{className:t,size:n="md"}=e;return(0,r.jsx)("div",{className:(0,a.cn)("animate-spin rounded-full border-solid border-primary border-t-transparent",{sm:"h-4 w-4 border-2",md:"h-8 w-8 border-3",lg:"h-12 w-12 border-4"}[n],t)})}function o(){return(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[50vh] p-4",children:[(0,r.jsx)(i,{size:"lg",className:"mb-4"}),(0,r.jsx)("h2",{className:"text-2xl font-semibold mb-2",children:"Loading"}),(0,r.jsx)("p",{className:"text-muted-foreground text-center max-w-md",children:"Please wait while we prepare the ProQA Plus content for you..."})]})}},5028:(e,t,n)=>{"use strict";n.d(t,{default:()=>a.a});var r=n(6645),a=n.n(r)},5973:(e,t,n)=>{Promise.resolve().then(n.bind(n,7654))},6645:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a}});let r=n(8229)._(n(7357));function a(e,t){var n;let a={};"function"==typeof e&&(a.loader=e);let i={...a,...t};return(0,r.default)({...i,modules:null==(n=i.loadableGenerated)?void 0:n.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6766:(e,t,n)=>{"use strict";n.d(t,{default:()=>a.a});var r=n(1469),a=n.n(r)},7357:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return l}});let r=n(5155),a=n(2115),i=n(2146);function o(e){return{default:e&&"default"in e?e.default:e}}n(255);let s={loader:()=>Promise.resolve(o(()=>null)),loading:null,ssr:!0},l=function(e){let t={...s,...e},n=(0,a.lazy)(()=>t.loader().then(o)),l=t.loading;function c(e){let o=l?(0,r.jsx)(l,{isLoading:!0,pastDelay:!0,error:null}):null,s=!t.ssr||!!t.loading,c=s?a.Suspense:a.Fragment,d=t.ssr?(0,r.jsxs)(r.Fragment,{children:[null,(0,r.jsx)(n,{...e})]}):(0,r.jsx)(i.BailoutToCSR,{reason:"next/dynamic",children:(0,r.jsx)(n,{...e})});return(0,r.jsx)(c,{...s?{fallback:o}:{},children:d})}return c.displayName="LoadableComponent",c}},7654:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>v});var r=n(5155),a=n(7746),i=n(1969),o=n(4865),s=n(8145),l=n(7168),c=n(8482),d=n(2372),u=n(7797),f=n(5695),p=n(2115),m=n(6671);function v(){let[e,t]=(0,p.useState)(null),[n,v]=(0,p.useState)(""),g=(0,f.useRouter)(),h=(0,p.useMemo)(()=>["Engine","Truck","Rescue","Medic","Chief"],[]),x=e=>e.includes("Police")||e.includes("State")||e.includes("Sheriff"),b=(0,p.useCallback)((e,t)=>{let n=(0,u.g1)(t),r=(null==n?void 0:n.fdRunOrder)||[];return e.sort((e,t)=>{var n,a;let i=x(e),o=x(t);if(i&&!o)return 1;if(!i&&o)return -1;if(i&&o)return 0;let s=h.some(t=>e.includes(t))||/\d+/.test(e),l=h.some(e=>t.includes(e))||/\d+/.test(t);if(s&&!l)return -1;if(!s&&l)return 1;if(!s&&!l)return 0;let c=(null==(n=e.match(/\d+/))?void 0:n[0])||"",d=(null==(a=t.match(/\d+/))?void 0:a[0])||"",u=r.indexOf(c),f=r.indexOf(d);if(-1!==u&&-1!==f&&u!==f)return u-f;if(-1===u&&-1!==f)return 1;if(-1!==u&&-1===f)return -1;let p=h.findIndex(t=>e.includes(t)),m=h.findIndex(e=>t.includes(e));return -1!==p&&-1!==m?p-m:-1===p&&-1!==m?1:-1!==p&&-1===m?-1:0})},[h]);function S(){navigator.clipboard.writeText(n).then(()=>{m.o.success("Case Created",{description:"Call created, creating dispatch for POLICE"});let t={postal:(null==e?void 0:e.postal)||"",buildingInfo:(null==e?void 0:e.buildingInfo)||"",street:(null==e?void 0:e.street)||"",crossStreet1:(null==e?void 0:e.crossStreet1)||"",crossStreet2:(null==e?void 0:e.crossStreet2)||"",callerNumber:(null==e?void 0:e.callerNumber)||"",callerStatement:(null==e?void 0:e.callerStatement)||"",service:"Police",fromOther:!0};localStorage.setItem("NEW_CALL",JSON.stringify(t)),g.push("/create-call/police")})}return(0,p.useEffect)(()=>{let e=localStorage.getItem("DISPATCH_HISTORY");if(e){let n=JSON.parse(e);Array.isArray(n)?t(n[n.length-1]):t(n)}},[]),(0,p.useEffect)(()=>{if(e){var t;let n=e.units?b([...e.units],e.postal):[],r=null==(t=(0,u.g1)(e.postal))?void 0:t.twp;v(["Code: ".concat(e.code),"Location: ".concat(e.postal," ").concat(e.street).concat(r?", ".concat(r):"").concat(e.buildingInfo?" - ".concat(e.buildingInfo):""),"Cross: ".concat(e.crossStreet1||"N/A"," / ").concat(e.crossStreet2||"N/A"),"Recc: ".concat(function(e){let t=d.En.find(t=>t.id===e);return t?t.units.map(e=>{let t=e.type;return"Ambulance"===t?t="Transport (BLS)":"Medic"===t?t="Transport (ALS)":"AMR 400 Series (BLS)"===t?t="Transport (BLS)":"AMR 600 Series (ALS)"===t?t="Transport (ALS)":"AMR 800 Series (ACLS"===t&&(t="Transport (ACLS)"),"".concat(e.quantity,"x ").concat(t)}).join(", "):"None"}(e.plan)),"Disp: ".concat(n.join(", ")||"None"),"Problem: ".concat(e.complaintShort," - ").concat(e.codeText),"Caller Statement: ".concat(e.callerStatement),"==============================","Scene Status: ".concat((null==e?void 0:e.notSecure)?"Not Secure":"Secure"),"Scene Com: Not Established","Channel: Fire Response","Staging Location: N/A","==============================","ProQA Information:",e.patient?"".concat(e.patient.count||"Unk","x ").concat(e.patient.age&&0!==e.patient.age?e.patient.age:"Unk","-").concat(e.patient.ageUnit,"-old, ").concat("Unknown"!==e.patient.gender?e.patient.gender:"Unk Gender",", ")+"".concat(!0===e.patient.isConscious?"Conscious":!1===e.patient.isConscious?"Unconscious":"Unk Consciousness",", ")+"".concat(!0===e.patient.isBreathing?"Breathing":!1===e.patient.isBreathing?"Not Breathing":"Unk Breathing"):"",e.reconfigured?"-- Call reconfigured from ".concat(e.reconfigured):"",!(null==e?void 0:e.proqaAnswers)||(null==e?void 0:e.isOverriden)?"-- ProQA Override":[...(e.proqaAnswers||[]).filter(e=>!e.omit).map(e=>"-- ".concat(e.answer))],"ProQA completed by: Dispatcher ".concat(localStorage.getItem("CALLSIGN")||"UNKNOWN")].flat().filter(Boolean).join("\n"))}},[e,b]),e?(0,r.jsxs)("div",{className:"flex flex-col min-h-screen",children:[(0,r.jsx)(o.A,{}),(0,r.jsx)("main",{className:"flex-1 flex justify-center py-8",children:(0,r.jsx)("div",{className:"container space-y-4",children:(0,r.jsxs)(c.Zp,{children:[(0,r.jsx)(c.aR,{children:(0,r.jsxs)(c.ZB,{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{children:"Dispatch Summary"}),(0,r.jsx)(s.E,{variant:"outline",className:"font-mono",children:e.complaint})]})}),(0,r.jsxs)(c.Wu,{className:"space-y-2",children:[(0,r.jsx)("textarea",{value:n,onChange:e=>v(e.target.value),className:"w-full min-h-[500px] font-mono text-sm p-4 border rounded-lg resize-none auto-expand",style:{resize:"none"},spellCheck:!1}),(0,r.jsx)("div",{className:"flex justify-end space-x-2 pt-4",children:(0,r.jsx)(l.$,{className:"cursor-pointer",variant:"destructive",onClick:()=>e.tandem&&"EMS"===e.service?S():void(e&&navigator.clipboard.writeText(n).then(()=>{var t;if((null==(t=d.En.find(t=>t.id===(null==e?void 0:e.plan)))?void 0:t.sendPolice)===!0&&!e.fromPolice)return S();m.o.success("Case Created",{description:"Dispatch summary has been copied"});let n=JSON.parse(localStorage.getItem("PREFERENCES")||"{}");if(n&&n.soundEffects){let e=new Audio("/audio/Dispatch.mp3");e.play(),e.volume=.5}localStorage.removeItem("NEW_CALL"),localStorage.removeItem("EMS_DATA"),window.dispatchEvent(new CustomEvent("dispatch-storage-update")),g.push("/dispatch")}).catch(e=>{console.error("Failed to copy:",e),m.o.error("Failed to copy",{description:"Could not copy to clipboard"})})),children:e.tandem&&"EMS"===e.service?"Continue":"Complete Case"})})]})]})})}),(0,r.jsx)(a.A,{})]}):(0,r.jsx)("div",{className:"min-h-screen flex justify-center items-center",children:(0,r.jsx)(i.A,{})})}},8145:(e,t,n)=>{"use strict";n.d(t,{E:()=>l});var r=n(5155);n(2115);var a=n(9708),i=n(2085),o=n(3999);let s=(0,i.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:n,asChild:i=!1,...l}=e,c=i?a.Slot:"span";return(0,r.jsx)(c,{"data-slot":"badge",className:(0,o.cn)(s({variant:n}),t),...l})}}},e=>{var t=t=>e(e.s=t);e.O(0,[4619,6580,6671,8045,7423,7797,9991,8441,1684,7358],()=>t(5973)),_N_E=e.O()}]);